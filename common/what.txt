Shared functionality and data structs between util and compositor mode
